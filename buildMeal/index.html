<!DOCTYPE html>
<html>
<head>
	<title>Build A Meal</title>
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<style>
		select {
			width: 100px;
		}
		div {
			display: inline-block;
			text-align: center;
		}
		#meal {
			width: 200px;
		}
		#restaurantItems {
			width: 200px;
		}

	</style>
</head>
<body>
<div>
<div>
Restaurant: <br>
<select id = "selectedRestaurant" size=13>
<option>Arby's</option>
<option>Burger King</option>
<option>Carl's Jr</option>
<option>Chick-fil-a</option>
<option>In-N-Out</option>
<option>Jack in the Box</option>
<option>KFC</option>
<option>McDonald's</option>
<option>Popeye's</option>
<option>Sonic</option>
<option>Taco Bell</option>
<option>Wendy's</option>
<option>Whataburger</option>
</select>
</div>

<div> Category: <br> <select id = "restaurantCategories" size = 13> </select> </div>
<div> Subcategories: <br> <select id = "restaurantSubcategories" size = 13> </select> </div>
<div> Items: <br><select id = "restaurantItems" size = 13> </select> <br> 

</div>
<button id = "addItem"> Add Item</button>
</div>
<br>
<div> My Meal: <br>
<select id = "meal" size = 25> </select>
<br>
<button id = "removeSelected"> Remove Item </button>
</div>
<div id = "mealStats">
<b>Meal Statistics </b> <br>
Calories: <p id = "totalCals"> </p> 
Calories from Fat: <p id = "fatCal"> </p>
Fat (g): <p id = "totalFat"> </p>
Saturated Fat (g): <p id = "satFat"> </p>
Trans Fat (g): <p id = "transFat"> </p>
Cholesterol (mg): <p id = "cholesterol"> </p>
Sodium (mg): <p id = "sodium"> </p>
Carbohydrates (g): <p id = "carbs"> </p>
Fiber (g): <p id = "fiber"> </p>
Sugars (g): <p id = "sugar"> </p>
Protein (g): <p id = "protein"> </p>


</div>
<script> 
var allData = [];
d3.csv("foodDataSet.csv", function(data) {
		allData = data;
	});



$("#selectedRestaurant").change(function() {
	$("#restaurantCategories").html('');
	$("#restaurantSubcategories").html('');
	$("#restaurantItems").html('');
	var addedCats = {};
	for (obj in allData) {
		if (allData[obj].Restaurant == $("#selectedRestaurant").val()) {
			if (!(allData[obj].Category in addedCats)) {
			$("#restaurantCategories").append('<option>' +allData[obj].Category+' </option>');
			addedCats[allData[obj].Category] = 1;
		}
		}
	}
});

$("#restaurantCategories").change(function() {
	$("#restaurantSubcategories").html('');
	$("#restaurantItems").html('');
	var added = {};
	for (obj in allData) {
		if ((allData[obj].Restaurant == $("#selectedRestaurant").val()) && (allData[obj].Category == $("#restaurantCategories").val())) {
			if (!(allData[obj].SubCategory in added)) {
			$("#restaurantSubcategories").append('<option>' +allData[obj].SubCategory+' </option>');
			added[allData[obj].SubCategory] = 1;
		}
		}
	}
	
});

$("#restaurantSubcategories").change(function() {
	$("#restaurantItems").html('');
	var added = {};
	for (obj in allData) {
		if ((allData[obj].Restaurant == $("#selectedRestaurant").val()) && (allData[obj].Category == $("#restaurantCategories").val())
			&& (allData[obj].SubCategory == $("#restaurantSubcategories").val())) {
			if (!(allData[obj].Item in added)) {
			$("#restaurantItems").append('<option>' +allData[obj].Item+' </option>');
			added[allData[obj].Item] = 1;
		}
		}
	}
	
});

$( "#addItem" ).click(function() {
  	alert("how about a salad instead?");
});
</script>
</body>
</html>